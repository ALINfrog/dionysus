language: python

os:
  - windows
  - linux


cache: pip

python:
    - "3.6"
    - "3.7"


matrix:
    fast_finish: true
    allow_failures:
        - os: windows  # allow failure on Win until Travis-Win supports python.
        - python: "3.7"  # Travis CI not supporting 3.7 yet


install:
    - pip install -r requirements.txt

    - pip install pytest-cov
    - pip install coveralls
    - pip install coverage
    - pip install codacy-coverage

# command to run tests
script:
    - pytest --cov=toonarmycaptain/dionysus/
    - coverage xml
    - python-codacy-coverage -r coverage.xml

after_success: coveralls
